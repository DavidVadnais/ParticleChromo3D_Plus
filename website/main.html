<!DOCTYPE html>
<html>


<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="main.css">
</head>
<body>
    <link rel="stylesheet" href="main.css">
</body>


<section class="header">
<div style="width:40%; height:90%; float: left; display: inline-block;">
   <img src = "logo_1.png"
      width = "20%" align="right"/> 
</div>
  <div style="width:60%; float: right; display: inline-block; ">
	  <h1 align="left">ParticleChromo3D+</h1>
	  <p align="left">A Web Server for ParticleChromo3D Algorithm <br>for 3D Chromosome Structure Reconstruction</p>
</div>
</section>

</br></br>
</br>
</br>
</br>

<section class="bodyfont">

<p>ParticleChromo3D Parameters</p>
Swarm Size: <input type="text" id="swarmSize" value="15"> Number of particles in system  <br><br>
Iteration Count: <input type="text" id="itt" value="30000"> Maximum iterations before stopping <br><br>
Threshold: <input type="text" id="threshold" value="0.000001"> Error threshold before stopping <br><br>
Random Range: <input type="text" id="randRange" value="1.0"> Range of x,y,z starting coords. Random value bewtween -randRange,randRange <br><br>
Loss Function:
<select name="loss" id="lf">
  <option value="2">RMSE</option>
  <option value="1">MSE</option>
  <option value="0">SSE<option>
  <option value="3">Huber</option>
</select><br><br>
Out File Name: <input type="text" id="outFile" value="chr.pdb"> Filename of the output pdb model <br><br>
Email Upon Completion (required): <input type="text" id="email" value=""><br><br>


<p>Upload Matrix (square matrix tab separated or  <a href="https://github.com/OluwadareLab/ParticleChromo3D_Plus/blob/main/README.md#3input-matrix-file-format">convert</a>)</p>


<form action = "http://biomlearn.uccs.edu:5001/upload" method = "POST" enctype = "multipart/form-data">
        <input href="/" class="btn-bgstroke" type = "file" name = "file" />
        <input href="/" class="btn-bgstroke" type="submit" value="Upload">
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<iframe id="myiframe" src="http://biomlearn.uccs.edu:5001/uploaded" style="height:450px;width:100%;" hidden></iframe>
<button  class="btn-bgstroke" onclick="toggle(this);">Double click to show uploaded files</button>


<button  class="btn-bgstroke2" onclick="customSubmit()">Submit</button>



<p>Example Interaction Frequency Matrix for 1MB GM12878 (Knight-Ruiz normalized)</p>

<select name="language" id="myText">
  <option value="chr23_matrix.txt">Chromosome 23</option>
  <option value="chr22_matrix.txt">Chromosome 22</option>
  <option value="chr21_matrix.txt">Chromosome 21</option>
  <option value="chr20_matrix.txt">Chromosome 20</option>
  <option value="chr19_matrix.txt">Chromosome 19</option>
  <option value="chr18_matrix.txt">Chromosome 18</option>
  <option value="chr17_matrix.txt">Chromosome 17</option>
  <option value="chr16_matrix.txt">Chromosome 16</option>
  <option value="chr15_matrix.txt">Chromosome 15</option>
  <option value="chr14_matrix.txt">Chromosome 14</option>
  <option value="chr13_matrix.txt">Chromosome 13</option>
  <option value="chr12_matrix.txt">Chromosome 12</option>
  <option value="chr11_matrix.txt">Chromosome 11</option>
  <option value="chr10_matrix.txt">Chromosome 10</option>
  <option value="chr9_matrix.txt">Chromosome 09</option>
  <option value="chr8_matrix.txt">Chromosome 08</option>
  <option value="chr7_matrix.txt">Chromosome 07</option>
  <option value="chr6_matrix.txt">Chromosome 06</option>
  <option value="chr5_matrix.txt">Chromosome 05</option>
  <option value="chr4_matrix.txt">Chromosome 04</option>
  <option value="chr3_matrix.txt">Chromosome 03</option>
  <option value="chr2_matrix.txt">Chromosome 02</option>
  <option value="chr1_matrix.txt">Chromosome 01</option>
</select>


<!--<a "biomlearn.uccs.edu:8080/success" class="btn-bgstroke"  onclick="myFunction()">Submit</a>-->
<br>
<button  class="btn-bgstroke2" onclick="myFunction()">Submit</button>
<script>
function myFunction() { 
	window.open(
                "http://biomlearn.uccs.edu:5001/process?ifname=" + document.getElementById("myText").value
		+ "&ss=" + document.getElementById("swarmSize").value
                + "&itt=" +  document.getElementById("itt").value
                + "&threshold=" +  document.getElementById("threshold").value
                + "&randRange=" +  document.getElementById("randRange").value
                + "&lf=" +  document.getElementById("lf").value
                + "&outFile=" +  document.getElementById("outFile").value
                + "&email=" +  document.getElementById("email").value
		, "_blank" 
              
        );
}

function customSubmit() {
        window.open(
                "http://biomlearn.uccs.edu:5001/process?ifname=uploaded_file"
                + "&ss=" + document.getElementById("swarmSize").value
                + "&itt=" +  document.getElementById("itt").value
                + "&threshold=" +  document.getElementById("threshold").value
                + "&randRange=" +  document.getElementById("randRange").value
                + "&lf=" +  document.getElementById("lf").value
                + "&outFile=" +  document.getElementById("outFile").value
                + "&email=" +  document.getElementById("email").value
                , "_blank"

        );
}

</script>

<script>
  let toggle = button => {
    let element = document.getElementById("myiframe");
    let hidden = element.getAttribute("hidden");
    
    if (hidden) {
       element.removeAttribute("hidden");
       button.innerText = "Hide Uploaded Files";
    } else {
       element.setAttribute("hidden", "hidden");
       button.innerText = "Show Uploaded Files";
    }
  }
</script>


<!--<div style="text-align:center;width: 600px;margin: 0 auto;border-style: dotted;">
<script type="text/javascript" 
src="http://chemapps.stolaf.edu/jmol/jmol.php?model=acetone&inline"  >
</script>
</div>-->
</section>

</br></br>
</br>
</br>
</br>

<section class="footer">
<br>
   <img src = "uccs-logo.png"
      alt = "UCCS" width = "500" />

</section>

</html>
